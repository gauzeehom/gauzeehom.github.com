<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>〖转〗Unix Shell（有删节） | blogau</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="原文链接 http://404null.com/item/16/
背景故事
Shell在计算机科学中，是指“提供用户使用界面”的软件，通常指的是命令行界面的解析器。一般来说，这个词是指操作系统中，提供访问内核所提供之服务的程序。Unix上的第一个Unix壳层（Unix shell）是肯·汤普逊（Ken Thompson）以Multics上的shell为模范而为Unix所写的sh。
Unix she">
<meta property="og:type" content="article">
<meta property="og:title" content="〖转〗Unix Shell（有删节）">
<meta property="og:url" content="http://gauzeehom.github.io/2013/06/04/e3-80-96-e8-bd-ac-e3-80-97unix-shell-ef-bc-88-e6-9c-89-e5-88-a0-e8-8a-82-ef-bc-89/index.html">
<meta property="og:site_name" content="blogau">
<meta property="og:description" content="原文链接 http://404null.com/item/16/
背景故事
Shell在计算机科学中，是指“提供用户使用界面”的软件，通常指的是命令行界面的解析器。一般来说，这个词是指操作系统中，提供访问内核所提供之服务的程序。Unix上的第一个Unix壳层（Unix shell）是肯·汤普逊（Ken Thompson）以Multics上的shell为模范而为Unix所写的sh。
Unix she">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="〖转〗Unix Shell（有删节）">
<meta name="twitter:description" content="原文链接 http://404null.com/item/16/
背景故事
Shell在计算机科学中，是指“提供用户使用界面”的软件，通常指的是命令行界面的解析器。一般来说，这个词是指操作系统中，提供访问内核所提供之服务的程序。Unix上的第一个Unix壳层（Unix shell）是肯·汤普逊（Ken Thompson）以Multics上的shell为模范而为Unix所写的sh。
Unix she">
  
    <link rel="alternative" href="/atom.xml" title="blogau" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">blogau</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="q" value="site:http://gauzeehom.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-e3-80-96-e8-bd-ac-e3-80-97unix-shell-ef-bc-88-e6-9c-89-e5-88-a0-e8-8a-82-ef-bc-89" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2013/06/04/e3-80-96-e8-bd-ac-e3-80-97unix-shell-ef-bc-88-e6-9c-89-e5-88-a0-e8-8a-82-ef-bc-89/" class="article-date">
  <time datetime="2013-06-04T08:29:34.000Z" itemprop="datePublished">2013-06-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/学习记录/">学习记录</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      〖转〗Unix Shell（有删节）
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>原文链接 <a href="http://404null.com/item/16/" target="_blank" rel="external">http://404null.com/item/16/</a></p>
<p><strong>背景故事</strong></p>
<p>Shell在计算机科学中，是指“提供用户使用界面”的软件，通常指的是命令行界面的解析器。一般来说，这个词是指操作系统中，提供访问内核所提供之服务的程序。Unix上的第一个Unix壳层（Unix shell）是肯·汤普逊（Ken Thompson）以Multics上的shell为模范而为Unix所写的sh。</p>
<p>Unix shell也叫做命令行界面，它是Unix操作系统下传统的用户和计算机的交互界面。用户直接输入命令来执行各种各样的任务。当然微软的Windows操作系统也提供了这样的功能，它们是Windows 95/98下的command.com、和基于Windows NT的各种系统下的cmd.exe。<br><a id="more"></a></p>
<p>普通意义上的shell就是可以接受用户输入命令的程序。它之所以被称作shell是因为它隐藏了操作系统低层的细节。同样的Unix下的图形用户界面GNOME和KDE，有时也被叫做“虚拟shell”或“图形shell”。</p>
<p>Unix操作系统下的shell既是用户交互的界面，也是控制系统的脚本语言。当然在这点也有别于Windows下的命令行，虽然也提供了很简单的控制语句。在Windows操作系统下，可能有些用户从来都不会直接的使用shell，然而在Unix系列操作系统下，shell仍然是控制系统启动、X Window启动、和很多其他实用工具的脚本解释程序。</p>
<p>Bourne shell，或 sh，是 Version 7 Unix 默认的Unix shell，替代执行文件同为sh的Thompson shell。它由AT&amp;T贝尔实验室的史蒂夫·伯恩在1977年在Version 7 Unix中针对大学与学院发布的。它的二进制程序文件在大多数Unix系统上位于/bin/sh ，在很多Unix版本中，它仍然是root的默认shell。</p>
<p><strong>你可能不知道的Shell</strong></p>
<p>Shell几乎是和Unix操作系统一起诞生，第一个Unix Shell是肯·汤普逊（Ken Thompson）以Multics上的Shell为模范在1971年改写而成，并命名Thompson sh。即便是后来流行的bash（shell的一种变体），它的年龄实际上比当前流行的所有的Linux kernel都大，可谓在Linux系统上是先有Shell再有Kernel。</p>
<p>当前绝大部分*nix和MacOS操作系统里的默认的Shell都是bash，bash由Brian Fox在1987年创造，全称Bourne Again shell ( bash)。</p>
<p>你或许听说除了bash之外，还有Bourne shell ( sh)，Korn shell ( ksh)，C shell （包括 csh and tcsh），但是你知道这个星球上一共存在着大约50多种不同的shell么？想了解他们，请参考 <a href="http://www.freebsd.org/ports/shells.html" target="_blank" rel="external">http://www.freebsd.org/ports/shells.html</a>。</p>
<p><strong>再分享一些可能你不知道的shell用法和脚本，简单&amp;强大。</strong></p>
<p><em>在阅读以下部分前，强烈建议读者打开一个shell实验，这些都不是shell教科书里的大路货哦：）</em></p>
<p><code>sudo !!</code><br>以root的身份执行上一条命令 。<br>场景举例：比如Ubuntu里用<code>apt-get</code>安装软件包的时候是需要root身份的，我们经常会忘记在<code>apt-get</code>前加<code>sudo</code>。每次不得不加上<code>sudo</code>再重新键入这行命令，这时可以很方便的用<code>sudo !!</code>完事。</p>
<p><code>cd –</code><br>回到上一次的目录 。<br>场景举例：当前目录为<code>/home/a</code>，用<code>cd ../b</code>切换到<code>/home/b</code>。这时可以通过反复执行<code>cd –</code>命令在<code>/home/a</code>和<code>/home/b</code>之间来回方便的切换。</p>
<p><code>^old^new</code><br>替换前一条命令里的部分字符串。<br>场景：<code>echo &quot;wanderful&quot;</code>，其实是想输出<code>echo &quot;wonderful&quot;</code>。只需要<code>^a^o</code>就行了，对很长的命令的错误拼写有很大的帮助。</p>
<p><code>man ascii</code><br>显示ascii码表。<br>场景：忘记ascii码表的时候还需要google么?尤其在天朝网络如此“顺畅”的情况下，就更麻烦在GWF多应用一次规则了，直接用本地的<code>man ascii</code>吧。</p>
<p><code>ctrl-x e</code><br>快速启动你的默认编辑器（由变量$EDITOR设置）。</p>
<p><code>netstat –tlnp</code><br>列出本机进程监听的端口号。</p>
<p><code>tail -f /path/to/file.log | sed &#39;/^Finished: SUCCESS$/ q&#39;</code><br>当file.log里出现Finished: SUCCESS时候就退出tail，这个命令用于实时监控并过滤log是否出现了某条记录。</p>
<p><code>ssh user@server bash &amp;lt; /path/to/local/script.sh</code><br>在远程机器上运行一段脚本。这条命令最大的好处就是不用把脚本拷到远程机器上。</p>
<p><code>screen -d -m -S some_name ping my_router</code><br>后台运行一段不终止的程序，并可以随时查看它的状态。<code>-d -m</code>参数启动“分离”模式，<code>-S</code>指定了一个session的标识。可以通过<code>-R</code>命令来重新“挂载”一个标识的session。更多细节请参考screen用法 <code>man screen</code>。</p>
<p><code>wget --random-wait -r -p -e robots=off -U mozilla http://www.example.com</code><br>下载整个www.example.com网站。</p>
<p><code>curl ifconfig.me</code><br>当你的机器在内网的时候，可以通过这个命令查看外网的IP。</p>
<p><code>lsof –i</code><br>实时查看本机网络服务的活动状态。</p>
<p><code>python -m SimpleHTTPServer</code><br>一句话实现一个HTTP server，把当前目录设为HTTP服务目录，可以通过<code>http://localhost:8000</code>访问 这也许是这个星球上最简单的HTTP服务器的实现了。</p>
<p>最后来个复杂的——<br><code>history | awk &#39;{CMD[$2]++;count++;} END { for (a in CMD )print CMD[a] &quot; &quot; CMD[a]/count*100 &quot;% &quot; a }&#39; | grep -v &quot;./&quot; | column -c3 -s &quot; &quot; -t | sort -nr | nl | head -n10</code><br>这行脚本能输出你最常用的十条命令，由此甚至可以洞察你是一个什么类型的程序员。看不懂这行代码？没关系，系统的学习一下*nix shell脚本吧，力荐<a href="http://www.ituring.com.cn/book/980" target="_blank" rel="external">《Linux命令行与Shell脚本编程大全》</a>。</p>
<p>最后还是那句Shell的至理名言：</p>
<blockquote>
<p><strong>“Where there is a shell，there is a way!”</strong></p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://gauzeehom.github.io/2013/06/04/e3-80-96-e8-bd-ac-e3-80-97unix-shell-ef-bc-88-e6-9c-89-e5-88-a0-e8-8a-82-ef-bc-89/" data-id="ci8x0xee3001972pv1igarfd2" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2013/06/05/e6-b1-aa-e5-b3-b0-e3-80-8a-e8-a7-89-e9-86-92-e3-80-8b/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          汪峰《觉醒》
        
      </div>
    </a>
  
  
    <a href="/2013/06/04/vim-e7-ac-94-e8-ae-b0/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Vim 笔记</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/学习记录/">学习记录</a><span class="category-list-count">16</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/未分类/">未分类</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/歌词/">歌词</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/测试目录/">测试目录</a><span class="category-list-count">2</span></li></ul>
    </div>
  </div>

  
    
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">四月 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/08/">八月 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/07/">七月 2013</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/06/">六月 2013</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/12/">十二月 2012</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/10/">十月 2012</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/08/">八月 2012</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/11/">十一月 2011</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/09/">九月 2011</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/07/">七月 2011</a><span class="archive-list-count">6</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2015/04/25/aboutme/">aboutme</a>
          </li>
        
          <li>
            <a href="/2015/04/25/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2013/08/21/gae-e5-ad-a6-e4-b9-a0-e7-ac-94-e8-ae-b0-ef-bc-88-e4-bb-a5-e9-83-a8-e7-bd-b2micolog-e4-b8-ba-e4-be-8b-ef-bc-89/">GAE使用（以部署micolog为例）</a>
          </li>
        
          <li>
            <a href="/2013/07/17/mpeg-x/">MPEG-x</a>
          </li>
        
          <li>
            <a href="/2013/07/08/hotsync-id-handspring-code-xxx/">Hotsync ID: Handspring Code: xxx</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2015 GaoZhihong<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>